<!doctype html><html>
<head>
<title>
图 :: LeetCode Solutions
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name=revised content="2021-09-12T14:58:00 UTC">
<meta name=description content>
<title>图 :: LeetCode Solutions</title>
<link rel="shortcut icon" href=/leetcode/images/favicon.png type=image/x-icon>
<link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css integrity=sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css>
<script src=https://code.jquery.com/jquery-3.5.1.min.js></script>
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/layout.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/css/style.main.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/css/style.menu.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/notice.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/tabs.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/panel.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/columns.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/children.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/attachments.css>
<link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/alert.css>
<link rel=stylesheet type=text/css href=/leetcode/css/docport.css>
<script src=/leetcode/js/docport.js></script>
<script type=text/javascript>var baseurl="https://nosugarcoffee.github.io/leetcode/"</script>
</head>
<body data-url=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/>
<style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style>
<header>
<div>
<div class=burger>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">&#9776;</a>
</div>
<div>
<a class=baselink href=https://nosugarcoffee.github.io/leetcode/>LeetCode Solutions</a>
</div>
</div>
</header>
<article>
<aside>
<div class=search>
<div class=searchbox>
<input data-search-input id=search-by type=text placeholder="Type to search...">
</div>
<script type=text/javascript src=/leetcode/vendor/lunr/lunr.min.js></script>
<script type=text/javascript src=/leetcode/vendor/auto-complete/auto-complete.js></script>
<link href=/leetcode/vendor/auto-complete/auto-complete.css rel=stylesheet>
<script type=text/javascript>var baseurl="https://nosugarcoffee.github.io/leetcode/"</script>
<script type=text/javascript src=/leetcode/js/search.js></script>
</div>
<div id=close_menu>
<a href=javascript:void(0); style=font-size:15px onclick="$('article > aside').toggleClass('responsive')">
<i class="fa fa-lg fa-times"></i>
</a>
</div>
<ul class=menu>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/ class="dd-item parent haschildren
item_level_$level">
<i class="fas fa-chevron-down ddexp"></i>
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/>算法分类</a>
<ul>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E5%AD%A6/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E5%AD%A6/>数学</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E7%BB%84/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E7%BB%84/>数组</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%AD%97%E7%AC%A6%E4%B8%B2/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%AD%97%E7%AC%A6%E4%B8%B2/>字符串</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E9%93%BE%E8%A1%A8/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E9%93%BE%E8%A1%A8/>链表</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/lru%E7%BC%93%E5%AD%98/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/lru%E7%BC%93%E5%AD%98/>LRU 缓存</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/ class="dd-item parent active
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/>图</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%A4%9A%E7%BA%BF%E7%A8%8B/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%A4%9A%E7%BA%BF%E7%A8%8B/>多线程</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%8E%92%E5%BA%8F/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%8E%92%E5%BA%8F/>排序</a>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E8%B4%AA%E5%BF%83/ class="dd-item
item_level_$level">
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E8%B4%AA%E5%BF%83/>贪心</a>
</li>
</ul>
</li>
<li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E5%89%91%E6%8C%87-offer/ class="dd-item
item_level_$level">
<a href=/leetcode/%E5%89%91%E6%8C%87-offer/>剑指 offer</a>
</li>
</ul>
</aside>
<section class=page>
<nav id=ariane aria-label=breadcrumb>
<ol class=ariane>
<li>
<a class=text-link href=https://nosugarcoffee.github.io/leetcode/>
Home
</a>
</li>
<li>
<a class=text-link href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/>
算法分类
</a>
</li>
<li class=active>
图
</li>
</ol>
</nav>
<h1>图</h1>
<div class=jump-to-section>
<span onclick="$h=$(this),$h.next('nav').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('nav').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right'})})">
<span class="fas fa-align-right"></span>
Jump to Section
<i class="fas fa-chevron-right"></i>
</span>
<nav id=TableOfContents>
<ul>
<li><a href=#最短路径>最短路径</a>
<ul>
<li><a href=#网络延迟时间>网络延迟时间</a></li>
<li><a href=#找到最终的安全状态>找到最终的安全状态</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=content>
<h2 ref=最短路径>最短路径</h2><a class=anchor id=最短路径></a>
<h3 ref=网络延迟时间>网络延迟时间</h3><a class=anchor id=网络延迟时间></a>
<p><a href=https://leetcode-cn.com/problems/network-delay-time/>743. leetcode</a></p>
<p>由题意知需要求源结点（k）到其余结点（vi）的最短路径中的最大值，
即 max(min(k, v1), min(k, v2) &mldr; min(k, vn))，
参考 Dijkstra 算法可以解决，需要借助三个辅助数组，
set[] 标记当前已知的最短路径顶点集合，dist[] 当前已知的最短路径，path[] 当前最短路径顶点的前置顶点</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#75715e>// ../../../../src/main/java/com/dll/graph/NetworkDelayTime.java
</span><span style=color:#75715e></span>
<span style=color:#f92672>package</span> com.dll.graph<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.util.Arrays<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NetworkDelayTime</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> <span style=color:#f92672>{</span>
        <span style=color:#75715e>// 1 :对应结点已经得到最短路径，0 :没有
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> set<span style=color:#f92672>;</span>
        <span style=color:#75715e>// Int.MAX / 2: 不可达, 其余：可达
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> dist<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> path<span style=color:#f92672>;</span>
        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> edges<span style=color:#f92672>;</span>

        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>findShortestInDist</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> dist<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> set<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>int</span> minIndex <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>int</span> min <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span> <span style=color:#f92672>/</span> 2<span style=color:#f92672>;</span>

            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> dist<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>set<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>!=</span> 1 <span style=color:#f92672>&amp;&amp;</span> dist<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;</span> min<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    min <span style=color:#f92672>=</span> dist<span style=color:#f92672>[</span>i<span style=color:#f92672>];</span>
                    minIndex <span style=color:#f92672>=</span> i<span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> minIndex<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#75715e>// 源结点是否都全部找到到其他结点的最短路径
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isFindAllShortestPath</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> set<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>return</span> <span style=color:#f92672>!</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>(</span>set<span style=color:#f92672>).</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>v <span style=color:#f92672>-&gt;</span> v <span style=color:#f92672>!=</span> 1<span style=color:#f92672>).</span><span style=color:#a6e22e>findAny</span><span style=color:#f92672>().</span><span style=color:#a6e22e>isPresent</span><span style=color:#f92672>();</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>findLongestDist</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> dist<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> set<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>int</span> longest <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> dist<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>set<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>==</span> 1 <span style=color:#f92672>&amp;&amp;</span> dist<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>&gt;</span> longest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    longest <span style=color:#f92672>=</span> dist<span style=color:#f92672>[</span>i<span style=color:#f92672>];</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> longest<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>dijkstraInit</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> times<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> n<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> k<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> edges <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>n <span style=color:#f92672>+</span> 1<span style=color:#f92672>][</span>n <span style=color:#f92672>+</span> 1<span style=color:#f92672>];</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> edges<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>fill</span><span style=color:#f92672>(</span>edges<span style=color:#f92672>[</span>i<span style=color:#f92672>],</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span> <span style=color:#f92672>/</span> 2<span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> times<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                edges<span style=color:#f92672>[</span>times<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>0<span style=color:#f92672>]][</span>times<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>1<span style=color:#f92672>]]</span> <span style=color:#f92672>=</span> times<span style=color:#f92672>[</span>i<span style=color:#f92672>][</span>2<span style=color:#f92672>];</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> set <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>n <span style=color:#f92672>+</span> 1<span style=color:#f92672>];</span>
            <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> dist <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>n <span style=color:#f92672>+</span> 1<span style=color:#f92672>];</span>
            <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> path <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>n <span style=color:#f92672>+</span> 1<span style=color:#f92672>];</span>

            Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>fill</span><span style=color:#f92672>(</span>dist<span style=color:#f92672>,</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>MAX_VALUE</span> <span style=color:#f92672>/</span> 2<span style=color:#f92672>);</span>
            Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>fill</span><span style=color:#f92672>(</span>path<span style=color:#f92672>,</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>);</span>
            dist<span style=color:#f92672>[</span>k<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
            set<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span>

            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>edges</span> <span style=color:#f92672>=</span> edges<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>set</span> <span style=color:#f92672>=</span> set<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>dist</span> <span style=color:#f92672>=</span> dist<span style=color:#f92672>;</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> path<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>networkDelayTime</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> times<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> n<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> k<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            dijkstraInit<span style=color:#f92672>(</span>times<span style=color:#f92672>,</span> n<span style=color:#f92672>,</span> k<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> n<span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>int</span> minIndex <span style=color:#f92672>=</span> findShortestInDist<span style=color:#f92672>(</span>dist<span style=color:#f92672>,</span> set<span style=color:#f92672>);</span>
                System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>minIndex<span style=color:#f92672>);</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>minIndex <span style=color:#f92672>==</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
                set<span style=color:#f92672>[</span>minIndex<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span>
                <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> j <span style=color:#f92672>=</span> 1<span style=color:#f92672>;</span> j <span style=color:#f92672>&lt;=</span> n<span style=color:#f92672>;</span> j<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>set<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>dist<span style=color:#f92672>[</span>minIndex<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> edges<span style=color:#f92672>[</span>minIndex<span style=color:#f92672>][</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>&lt;</span> dist<span style=color:#f92672>[</span>j<span style=color:#f92672>])</span> <span style=color:#f92672>{</span>
                            dist<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> dist<span style=color:#f92672>[</span>minIndex<span style=color:#f92672>]</span> <span style=color:#f92672>+</span> edges<span style=color:#f92672>[</span>minIndex<span style=color:#f92672>][</span>j<span style=color:#f92672>];</span>
                            path<span style=color:#f92672>[</span>j<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> minIndex<span style=color:#f92672>;</span>
                        <span style=color:#f92672>}</span>
                    <span style=color:#f92672>}</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> isFindAllShortestPath<span style=color:#f92672>(</span>set<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> findLongestDist<span style=color:#f92672>(</span>dist<span style=color:#f92672>,</span> set<span style=color:#f92672>)</span> <span style=color:#f92672>!=</span> 0 <span style=color:#f92672>?</span> findLongestDist<span style=color:#f92672>(</span>dist<span style=color:#f92672>,</span> set<span style=color:#f92672>)</span> <span style=color:#f92672>:</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div><h3 ref=找到最终的安全状态>找到最终的安全状态</h3><a class=anchor id=找到最终的安全状态></a>
<p><a href=https://leetcode-cn.com/problems/find-eventual-safe-states/>802. leetcode</a></p>
<p>深度遍历图的各个结点，并记录下遍历的路径，遇到重复（呈环）则表示深度遍历路径上的每个结点都不是「安全」结点</p>
<ul>
<li>其中 <code>graph[ori] = new int[]{}</code> 很关键，可以减少下次遍历到该结点的深度</li>
<li>unsafe 用于记录当前环内的结点，环内的结点不可能是「安全」的</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=color:#75715e>// ../../../../src/main/java/com/dll/graph/FindEventualSafeStates.java
</span><span style=color:#75715e></span>
<span style=color:#f92672>package</span> com.dll.graph<span style=color:#f92672>;</span>

<span style=color:#f92672>import</span> java.util.ArrayList<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.HashSet<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.List<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> java.util.Set<span style=color:#f92672>;</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>FindEventualSafeStates</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> safe <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
        <span style=color:#66d9ef>private</span> Set<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> unSafe <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashSet<span style=color:#f92672>&lt;&gt;();</span>
        <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> path <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>

        <span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>eventualSafeNodes</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> graph<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> graph<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>;</span> i<span style=color:#f92672>++)</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>unSafe<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>i<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                    <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>isSafe<span style=color:#f92672>(</span>graph<span style=color:#f92672>,</span> i<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                    safe<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>i<span style=color:#f92672>);</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
            <span style=color:#66d9ef>return</span> safe<span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>

        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isSafe</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>[][]</span> graph<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> ori<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>path<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>ori<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                unSafe<span style=color:#f92672>.</span><span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>path<span style=color:#f92672>);</span>
                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
            <span style=color:#f92672>}</span>
            path<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>ori<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> node <span style=color:#f92672>:</span> graph<span style=color:#f92672>[</span>ori<span style=color:#f92672>])</span> <span style=color:#f92672>{</span>
                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>isSafe<span style=color:#f92672>(</span>graph<span style=color:#f92672>,</span> node<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                    path<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>path<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>);</span>
                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
                <span style=color:#f92672>}</span>
            <span style=color:#f92672>}</span>
            graph<span style=color:#f92672>[</span>ori<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]{};</span>
            path<span style=color:#f92672>.</span><span style=color:#a6e22e>remove</span><span style=color:#f92672>(</span>path<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>);</span>
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div>
</div>
<div class=chevrons>
<a class=next href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%A4%9A%E7%BA%BF%E7%A8%8B/ title=多线程 style=margin-right:0>
<div>
<p>Next page</p>
<label>多线程</label>
</div>
<i class="fas fa-arrow-right" style=font-size:1.7em></i></a>
</div>
</section>
<section class=right-menu>
<div class=TableOfContents>
<label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label>
<nav>
<ul>
<li><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/>图</a></li>
</ul>
</nav>
<nav id=TableOfContents>
<ul>
<li><a href=#最短路径>最短路径</a>
<ul>
<li><a href=#网络延迟时间>网络延迟时间</a></li>
<li><a href=#找到最终的安全状态>找到最终的安全状态</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<div class=Actions>
<nav>
<ul>
</ul>
</nav>
</div>
</section>
</article>
<footer>
</footer>
</body>
</html>