<!doctype html><html><head><title>单调栈 :: LeetCode Solutions
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name=revised content="2023-12-16T15:43:05 UTC"><meta name=description content><title>单调栈 :: LeetCode Solutions</title>
<link rel="shortcut icon" href=/leetcode/images/favicon.png type=image/x-icon><link href=https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.css><script src=https://code.jquery.com/jquery-3.5.1.min.js></script><link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel=stylesheet><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/layout.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/css/style.main.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/css/style.menu.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/notice.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/tabs.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/panel.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/columns.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/children.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/attachments.css><link rel=stylesheet type=text/css href=https://nosugarcoffee.github.io/leetcode/sass/shortcodes/alert.css><link rel=stylesheet type=text/css href=/css/docport.css><script src=/leetcode/js/docport.js></script><script type=text/javascript>var baseurl="https://nosugarcoffee.github.io/leetcode/"</script></head><body data-url=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8D%95%E8%B0%83%E6%A0%88/><style type=text/css>#debug{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:3.5rem;margin-bottom:.35rem;padding:0 2rem;position:fixed;left:0;right:0;top:0;top:0;min-height:150px;background-color:#fff;border:3px solid red;z-index:10000;word-wrap:all;overflow:auto}</style><header><div><div class=burger><a href=javascript:void(0); style=font-size:15px onclick='$("article > aside").toggleClass("responsive")'>&#9776;</a></div><div><a class=baselink href=https://nosugarcoffee.github.io/leetcode/>LeetCode Solutions</a></div></div></header><article><aside><div class=search><div class=searchbox><input data-search-input id=search-by type=text placeholder="Type to search..."></div><script type=text/javascript src=/leetcode/vendor/lunr/lunr.min.js></script><script type=text/javascript src=/leetcode/vendor/auto-complete/auto-complete.js></script><link href=/leetcode/vendor/auto-complete/auto-complete.css rel=stylesheet><script type=text/javascript>var baseurl="https://nosugarcoffee.github.io/leetcode/"</script><script type=text/javascript src=/leetcode/js/search.js></script></div><div id=close_menu><a href=javascript:void(0); style=font-size:15px onclick='$("article > aside").toggleClass("responsive")'><i class="fa fa-lg fa-times"></i></a></div><ul class=menu><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/ class="dd-item parent haschildren
item_level_$level"><i class="fas fa-chevron-down ddexp"></i>
<a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/>算法分类</a><ul><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E5%AD%A6/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E5%AD%A6/>数学</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E7%BB%84/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%95%B0%E7%BB%84/>数组</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8D%95%E8%B0%83%E6%A0%88/ class="dd-item active
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8D%95%E8%B0%83%E6%A0%88/>单调栈</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%AD%97%E7%AC%A6%E4%B8%B2/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%AD%97%E7%AC%A6%E4%B8%B2/>字符串</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E9%93%BE%E8%A1%A8/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E9%93%BE%E8%A1%A8/>链表</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/lru%E7%BC%93%E5%AD%98/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/lru%E7%BC%93%E5%AD%98/>LRU 缓存</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%9E%E6%BA%AF/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%9E%E6%BA%AF/>回溯</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/>动态规划</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%9B%BE/>图</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%A4%9A%E7%BA%BF%E7%A8%8B/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%A4%9A%E7%BA%BF%E7%A8%8B/>多线程</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%8E%92%E5%BA%8F/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E6%8E%92%E5%BA%8F/>排序</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E8%B4%AA%E5%BF%83/ class="dd-item
item_level_$level"><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E8%B4%AA%E5%BF%83/>贪心</a></li></ul></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/adventofcode/ class="dd-item
item_level_$level"><a href=/leetcode/adventofcode/>AdventOfCode</a></li><li data-nav-id=https://nosugarcoffee.github.io/leetcode/%E5%89%91%E6%8C%87-offer/ class="dd-item
item_level_$level"><a href=/leetcode/%E5%89%91%E6%8C%87-offer/>剑指 offer</a></li></ul></aside><section class=page><nav id=ariane aria-label=breadcrumb><ol class=ariane><li><a class=text-link href=https://nosugarcoffee.github.io/leetcode/>Home</a></li><li><a class=text-link href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/>算法分类</a></li><li class=active>单调栈</li></ol></nav><h1>单调栈</h1><div class=jump-to-section><span onclick='$h=$(this),$h.next("nav").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("nav").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'><span class="fas fa-align-right"></span>
Jump to Section
<i class="fas fa-chevron-right"></i></span><nav id=TableOfContents><ul><li><a href=#每日温度>每日温度</a></li><li><a href=#下一个更大元素-i>下一个更大元素 I</a></li><li><a href=#下一个更大元素-ii>下一个更大元素 II</a></li><li><a href=#接雨水>接雨水</a></li><li><a href=#柱状图中最大的矩形>柱状图中最大的矩形</a></li></ul></nav></div><div class=content><h2 ref=每日温度>每日温度</h2><a class=anchor id=每日温度></a><p><a href=https://leetcode.cn/problems/daily-temperatures>739. daily-temperatures</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ../../../../src/main/java/com/dll/monotonicstack/DailyTemperatures.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.dll.monotonicstack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Stack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DailyTemperatures</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Temperature</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> index;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Temperature</span>(<span style=color:#66d9ef>int</span> value, <span style=color:#66d9ef>int</span> index) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> index;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getValue</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getIndex</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> index;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>dailyTemperatures</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> temperatures) {
</span></span><span style=display:flex><span>      Stack<span style=color:#f92672>&lt;</span>Temperature<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Stack<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>temperatures.<span style=color:#a6e22e>length</span><span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> temperatures.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        Temperature current <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Temperature(temperatures<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>, i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>empty</span>()) {
</span></span><span style=display:flex><span>          Temperature peeked <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&gt;</span> peeked.<span style=color:#a6e22e>value</span>) {
</span></span><span style=display:flex><span>            Temperature popped <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>            result<span style=color:#f92672>[</span>popped.<span style=color:#a6e22e>index</span><span style=color:#f92672>]</span> <span style=color:#f92672>=</span> current.<span style=color:#a6e22e>index</span> <span style=color:#f92672>-</span> popped.<span style=color:#a6e22e>index</span>;
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(current);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> result;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 ref=下一个更大元素-i>下一个更大元素 I</h2><a class=anchor id=下一个更大元素-i></a><p><a href=https://leetcode.cn/problems/next-greater-element-i/>496. next-greater-element-i</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ../../../../src/main/java/com/dll/monotonicstack/NextGreaterElementI.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.dll.monotonicstack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Arrays;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.HashMap;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Map;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Stack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NextGreaterElementI</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Element</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> index;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Element</span>(<span style=color:#66d9ef>int</span> value, <span style=color:#66d9ef>int</span> index) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> index;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getValue</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getIndex</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> index;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>nextGreaterElement</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> nums1, <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> nums2) {
</span></span><span style=display:flex><span>      Map<span style=color:#f92672>&lt;</span>Integer, Integer<span style=color:#f92672>&gt;</span> nextGreaterElements <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      Stack<span style=color:#f92672>&lt;</span>Element<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Stack<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> nums2.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        Element current <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Element(nums2<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>, i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>empty</span>()) {
</span></span><span style=display:flex><span>          Element peek <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&gt;</span> peek.<span style=color:#a6e22e>getValue</span>()) {
</span></span><span style=display:flex><span>            Element pop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>            nextGreaterElements.<span style=color:#a6e22e>put</span>(pop.<span style=color:#a6e22e>getValue</span>(), current.<span style=color:#a6e22e>getValue</span>());
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(current);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> Arrays.<span style=color:#a6e22e>stream</span>(nums1)
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>map</span>(v <span style=color:#f92672>-&gt;</span> nextGreaterElements.<span style=color:#a6e22e>get</span>(v) <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>?</span> <span style=color:#f92672>-</span>1 : nextGreaterElements.<span style=color:#a6e22e>get</span>(v))
</span></span><span style=display:flex><span>          .<span style=color:#a6e22e>toArray</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 ref=下一个更大元素-ii>下一个更大元素 II</h2><a class=anchor id=下一个更大元素-ii></a><p><a href=https://leetcode.cn/problems/next-greater-element-ii/>503. next-greater-element-ii</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ../../../../src/main/java/com/dll/monotonicstack/NextGreaterElementII.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.dll.monotonicstack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Arrays;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Stack;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.IntStream;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>NextGreaterElementII</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Element</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> index;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Element</span>(<span style=color:#66d9ef>int</span> value, <span style=color:#66d9ef>int</span> index) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getValue</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getIndex</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>nextGreaterElements</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> nums) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> target <span style=color:#f92672>=</span> IntStream.<span style=color:#a6e22e>concat</span>(Arrays.<span style=color:#a6e22e>stream</span>(nums), Arrays.<span style=color:#a6e22e>stream</span>(nums)).<span style=color:#a6e22e>toArray</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> result <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[</span>nums.<span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> 2<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>      Arrays.<span style=color:#a6e22e>fill</span>(result, <span style=color:#f92672>-</span>1);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      Stack<span style=color:#f92672>&lt;</span>Element<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Stack<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> target.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        Element current <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Element(target<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>, i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>          Element peek <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&gt;</span> peek.<span style=color:#a6e22e>getValue</span>()) {
</span></span><span style=display:flex><span>            Element pop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>            result<span style=color:#f92672>[</span>pop.<span style=color:#a6e22e>getIndex</span>()<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> current.<span style=color:#a6e22e>getValue</span>();
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(current);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> Arrays.<span style=color:#a6e22e>stream</span>(result).<span style=color:#a6e22e>limit</span>(nums.<span style=color:#a6e22e>length</span>).<span style=color:#a6e22e>toArray</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 ref=接雨水>接雨水</h2><a class=anchor id=接雨水></a><p><a href=https://leetcode.cn/problems/trapping-rain-water>42. trapping-rain-water</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ../../../../src/main/java/com/dll/monotonicstack/TrappingRainWater.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.dll.monotonicstack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Stack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TrappingRainWater</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Elevation</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> value;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> index;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Elevation</span>(<span style=color:#66d9ef>int</span> value, <span style=color:#66d9ef>int</span> index) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> value;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getValue</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> value;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getIndex</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>trap</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> height) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> traps <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>      Stack<span style=color:#f92672>&lt;</span>Elevation<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Stack<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> height.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        Elevation current <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Elevation(height<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>, i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>empty</span>()) {
</span></span><span style=display:flex><span>          Elevation peek <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&gt;=</span> peek.<span style=color:#a6e22e>getValue</span>()) {
</span></span><span style=display:flex><span>            Elevation pop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&gt;</span> peek.<span style=color:#a6e22e>getValue</span>() <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>empty</span>()) {
</span></span><span style=display:flex><span>              Elevation peekAfterPop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>int</span> trap <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>                  (Math.<span style=color:#a6e22e>min</span>(peekAfterPop.<span style=color:#a6e22e>getValue</span>(), current.<span style=color:#a6e22e>getValue</span>()) <span style=color:#f92672>-</span> pop.<span style=color:#a6e22e>getValue</span>())
</span></span><span style=display:flex><span>                      <span style=color:#f92672>*</span> (current.<span style=color:#a6e22e>getIndex</span>() <span style=color:#f92672>-</span> peekAfterPop.<span style=color:#a6e22e>getIndex</span>() <span style=color:#f92672>-</span> 1);
</span></span><span style=display:flex><span>              traps <span style=color:#f92672>+=</span> trap;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(current);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> traps;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 ref=柱状图中最大的矩形>柱状图中最大的矩形</h2><a class=anchor id=柱状图中最大的矩形></a><p><a href=https://leetcode.cn/problems/largest-rectangle-in-histogram/>84. largest-rectangle-in-histogram</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// ../../../../src/main/java/com/dll/monotonicstack/LargestRectangleInHistogram.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> com.dll.monotonicstack;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.ArrayDeque;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Arrays;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Deque;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.stream.IntStream;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LargestRectangleInHistogram</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Solution</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rectangle</span> {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> height;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> index;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Rectangle</span>(<span style=color:#66d9ef>int</span> height, <span style=color:#66d9ef>int</span> index) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> height;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>index</span> <span style=color:#f92672>=</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getHeight</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> height;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getIndex</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> index;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>largestRectangleArea</span>(<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> heights) {
</span></span><span style=display:flex><span>      Deque<span style=color:#f92672>&lt;</span>Rectangle<span style=color:#f92672>&gt;</span> stack <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayDeque<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> heights_ <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>          IntStream.<span style=color:#a6e22e>concat</span>(Arrays.<span style=color:#a6e22e>stream</span>(heights), Arrays.<span style=color:#a6e22e>stream</span>(<span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> {0})).<span style=color:#a6e22e>toArray</span>();
</span></span><span style=display:flex><span>      stack.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> Rectangle(0, <span style=color:#f92672>-</span>1));
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>int</span> maxArea <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> heights_.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        Rectangle current <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Rectangle(heights_<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>, i);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>          Rectangle peek <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>if</span> (current.<span style=color:#a6e22e>getHeight</span>() <span style=color:#f92672>&lt;</span> peek.<span style=color:#a6e22e>getHeight</span>()) {
</span></span><span style=display:flex><span>            Rectangle pop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>stack.<span style=color:#a6e22e>isEmpty</span>()) {
</span></span><span style=display:flex><span>              Rectangle peekAfterPop <span style=color:#f92672>=</span> stack.<span style=color:#a6e22e>peek</span>();
</span></span><span style=display:flex><span>              maxArea <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>                  Math.<span style=color:#a6e22e>max</span>(
</span></span><span style=display:flex><span>                      maxArea,
</span></span><span style=display:flex><span>                      (current.<span style=color:#a6e22e>getIndex</span>() <span style=color:#f92672>-</span> 1 <span style=color:#f92672>-</span> peekAfterPop.<span style=color:#a6e22e>getIndex</span>()) <span style=color:#f92672>*</span> pop.<span style=color:#a6e22e>getHeight</span>());
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        stack.<span style=color:#a6e22e>push</span>(current);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> maxArea;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=chevrons><a class=next href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%AD%97%E7%AC%A6%E4%B8%B2/ title=字符串 style=margin-right:0><div><p>Next page</p><label>字符串</label></div><i class="fas fa-arrow-right" style=font-size:1.7em></i></a></div></section><section class=right-menu><div class=TableOfContents><label><i class="fas fa-align-right"></i>&nbsp;&nbsp;What's on this page</label><nav><ul><li><a href=/leetcode/%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB/%E5%8D%95%E8%B0%83%E6%A0%88/>单调栈</a></li></ul></nav><nav id=TableOfContents><ul><li><a href=#每日温度>每日温度</a></li><li><a href=#下一个更大元素-i>下一个更大元素 I</a></li><li><a href=#下一个更大元素-ii>下一个更大元素 II</a></li><li><a href=#接雨水>接雨水</a></li><li><a href=#柱状图中最大的矩形>柱状图中最大的矩形</a></li></ul></nav></div><div class=Actions><nav><ul></ul></nav></div></section></article><footer></footer></body></html>